我已完成需求分析，将为您实现右侧图片的“描绘提取图标”功能。

## 核心方案

我们将新增一个“绘制模式”，允许用户在右侧图片上自由绘制轮廓，并在绘制过程中提供放大镜辅助。绘制结束后，系统将自动平滑路径并提取选区内的图标。

### 1. 交互设计

* **新增按钮**：在右侧工具栏添加“Draw & Extract”按钮。

* **绘制操作**：

  * 点击按钮进入绘制状态。

  * 在图片上按下并拖动鼠标进行描边。

  * 拖动过程中，光标旁显示**放大镜**（复用左侧截图的像素级放大功能），帮助精确对齐边缘。

  * 松开鼠标后，自动闭合路径并执行提取。

### 2. 技术实现

* **DrawPainter**：新建一个画板类，用于实时绘制用户的轨迹线（绿色）和放大镜效果。

* **磁性套索（Magnetic Lasso）**：加入边缘检测算法，让路径自动吸附到图像颜色差异大的边缘。

* **路径平滑（自动校正）**：
  * 原始轨迹通常会有手抖产生的锯齿。
  * **实现方案**：在生成裁剪路径时，使用\*\*二次贝塞尔曲线（Quadratic Bezier）\*\*算法，将离散的触摸点拟合成平滑曲线，从而实现“自动校正”效果。

* **图标提取**：

  * 使用 `Path` 构建闭合形状。

  * 利用 `Canvas.clipPath` 对原图进行裁剪。

  * 将裁剪后的结果生成为新的图片显示在右侧。

### 3. 可完善与扩展点（未来规划）

* **形状识别**：自动识别用户画的是矩形还是圆形，并标准化为规则几何体。

* **背景处理**：提取后的图标目前是透明背景，未来可添加自动去除残留杂色或替换背景色的功能。

* **撤销/重做**：如果一次没画好，支持撤销上一步操作。

## 执行计划

1. 创建 `DrawPainter` 类，实现路径绘制和放大镜逻辑。
2. 更新 `ScreenCaptureTestPage`，添加绘制状态管理和 UI 按钮。
3. 实现 `_extractIcon` 方法，包含路径平滑算法和图片裁剪逻辑。
4. 集成并验证功能。

